내가 테스트 코드를 실행하다가 발견한 것이다.

@Trasactional 어노테이션이 달린 메서드가 실행될 때 트랜잭션을 시작하는데
이 트랜잭션은 자신만의 1차 캐시를 가진다.
테스트 코드에선 처음에 findLatest() 함수를 통해 객체를 조회하면
1차 캐시에 이 객체가 저장되고
다음에 서브 스래드를 만들어서 트랜잭션을 생성하고 데이터를 수정하고 저장하는데

메인스래드는 트랜잭션의 격리 수준으로 인해서 해당 변화를 반영시키지 않고
자신의 1차 캐시의 객체 값을 다시 불러왔다.
findById를 했는데도 말이다.

이 문제를 해결하려면
EntityManager를 가져와서  clear()를 하면 해결이 되는데
이러면 1차 캐시의 객체 값을 지우기 때문에
실제 데이터베이스의 값을 조회를 한다.
