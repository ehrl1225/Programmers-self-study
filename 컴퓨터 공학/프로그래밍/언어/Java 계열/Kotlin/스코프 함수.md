# Kotlin 스코프 함수

Kotlin의 스코프 함수는 객체의 컨텍스트 내에서 코드 블록을 실행하는 기능을 제공하는 표준 라이브러리 함수입니다. `let`, `run`, `with`, `apply`, `also` 다섯 가지 함수가 있으며, 코드를 더 간결하고 가독성 있게 만들어줍니다.

스코프 함수의 주요 차이점은 컨텍스트 객체를 참조하는 방식(`this` 또는 `it`)과 반환 값(컨텍스트 객체 또는 람다 결과)에 있습니다.

| 함수 | 컨텍스트 객체 | 반환 값 |
| :--- | :--- | :--- |
| `let` | `it` | 람다 결과 |
| `run` | `this` | 람다 결과 |
| `with` | `this` | 람다 결과 |
| `apply` | `this` | 컨텍스트 객체 |
| `also` | `it` | 컨텍스트 객체 |

---

### `let`
- **컨텍스트 객체**: `it`
- **반환 값**: 람다 결과
- **주요 용도**: Null이 아닌 객체에 대해서만 코드 블록을 실행하거나, 체이닝된 결과에 대해 연산을 수행할 때 유용합니다. 특히 Nullable 객체를 안전하게 다룰 때 많이 사용됩니다.

```kotlin
val person: Person? = getPerson()
person?.let {
    println("이름: ${it.name}")
    println("나이: ${it.age}")
}
```

### `run`
- **컨텍스트 객체**: `this`
- **반환 값**: 람다 결과
- **주요 용도**: 객체 초기화와 결과 계산을 동시에 수행해야 할 때 유용합니다.

```kotlin
val person = Person("John", 25).run {
    age = 30
    "이 사람의 이름은 $name 입니다."
}
println(person) // "이 사람의 이름은 John 입니다."
```

### `with`
- **컨텍스트 객체**: `this`
- **반환 값**: 람다 결과
- **주요 용도**: Null-safe 연산자(`?.`) 없이 특정 객체에 대해 여러 함수를 호출할 때 권장됩니다. 확장 함수가 아니므로 컨텍스트 객체를 인자로 전달해야 합니다.

```kotlin
val person = Person("John", 25)
val result = with(person) {
    println("이름: $name")
    println("나이: $age")
    age + 5
}
println("5년 뒤 나이: $result")
```

### `apply`
- **컨텍스트 객체**: `this`
- **반환 값**: 컨텍스트 객체
- **주요 용도**: 객체 설정에 주로 사용됩니다. 자기 자신을 반환하므로 함수 호출을 체이닝하거나 변수에 할당할 수 있습니다.

```kotlin
val person = Person("John", 25).apply {
    city = "New York"
    isStudent = true
}
```

### `also`
- **컨텍스트 객체**: `it`
- **반환 값**: 컨텍스트 객체
- **주요 용도**: 객체 자체에 영향을 주지 않는 부가적인 작업을 수행할 때(예: 로깅, 디버깅) 유용합니다. 컨텍스트 객체를 반환하므로 원래 객체에 대한 함수 호출을 계속 체이닝할 수 있습니다.

```kotlin
val person = Person("John", 25).also {
    println("이름이 ${it.name}인 person 객체 생성됨")
}
```

---
# 주의 사항

스코프 함수는 코드를 우아하게 만들 수 있지만, 과도하게 사용하거나 중첩하면 오히려 가독성을 해칠 수 있습니다. 자신의 의도를 가장 명확하게 표현하는 함수를 선택하는 것이 중요합니다.

let과 run은 비슷하게 동작하고
apply와 also도 비슷하게 동작하는데
용도에 따라서 다르게 사용해서
가독성을 높히면 된다.